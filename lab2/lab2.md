# 南京大学2025年春季操作系统实验2笔记

本实验需在Linux系统下实现，依赖`/proc`文件系统解析进程树，macOS因缺乏该目录不兼容。

程序需简洁高效，代码控制在100–150行内，通过遍历`/proc/`下的进程目录构建父子关系并递归打印。

## 基础知识

计算机的操作系统给我们提供了“对象+API”，应用程序通过他们组合出各式各样的功能。

日常里我们经常使用的任务管理器等类似的程序其实都是利用操作系统提供给我们的进程信息实现的，例如，`pstree`就是一个可以直观打印父子进程的工具。

`/proc/PID/stat`是Linux内核维护的进程状态文件，包含了一个进程几乎所有的关键信息，它是一个单行、固定格式、高效可解析的二进制文本混合文件。

```c
struct dirent {
    ino_t          d_ino;       // inode 节点号
    off_t          d_off;       // 偏移量（不常用）
    unsigned short d_reclen;    // 目录项长度
    unsigned char  d_type;      // 文件类型
    char           d_name[256]; // 文件名（以 '\0' 结尾的字符串）
};
```



